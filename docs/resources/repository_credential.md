---
Title: "Repository Credential Resource"
Description: |-
    Creating the Repository Credential resource.
---

# Repository Credential

The `tanzu-mission-control_repository_credential` resource allows you to add, update, and delete repository credential to a particular scope through Tanzu Mission Control.

Repository credentials are used to authenticate to Git repositories and must be created before adding your Git repository.
To create a repository credential, you must be associated with the cluster.admin or clustergroup.admin role.

[repository-credential]: https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-using/GUID-657661A2-B26E-412A-9A46-7467A44A075A.html

## Repository Credential Scope

In the Tanzu Mission Control resource hierarchy, there are two levels at which you can specify repository credential resources:
- **object groups** - `cluster_group` block under `scope` sub-resource
- **Kubernetes objects** - `cluster` block under `scope` sub-resource

**Note:**
The scope parameter is mandatory in the schema and the user needs to add one of the defined scopes to the script for the provider to function.
Only one scope per resource is allowed.

## Repository Credential Spec

In the Tanzu Mission Control resource hierarchy, there are two types of credential at which you can create repository credential resources:
- **Username/Password** - `username_password` block under `spec` sub-resource
- **SSH Key** - `ssh_key` block under `spec` sub-resource

**Note:**
The spec parameter is mandatory in the schema and the user needs to add one of the defined credential type to the script for the provider to function.
Only one credential type per resource is allowed.

## Cluster group scoped Repository Credential with Username/Password type credential

### Example Usage

```terraform
# Create Tanzu Mission Control source secret with attached set as default value.
resource "tanzu-mission-control_repository_credential" "cluster_group_source_secret_username_password" {
  name = "tf-secret" # Required

  scope {
    cluster_group {
      name = "default" # Required
    }
  }

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    data {
      username_password {
        username = "testusername" # Required
        password = "testpassword" # Required
      }
    }
  }
}
```

## Cluster scoped Repository Credential with Username/Password type credential

### Example Usage

```terraform
# Create Tanzu Mission Control source secret with attached set as default value.
resource "tanzu-mission-control_repository_credential" "cluster_source_secret_username_password" {
  name = "tf-secret" # Required

  scope {
    cluster {
      name                    = "testcluster" # Required
      provisioner_name        = "attached"    # Default: attached
      management_cluster_name = "attached"    # Default: attached
    }
  }

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    data {
      username_password {
        username = "testusername" # Required
        password = "testpassword" # Required
      }
    }
  }
}
```

## Cluster group scoped Repository Credential with SSH Key type credential

### Example Usage

```terraform
# Create Tanzu Mission Control source secret with attached set as default value.
resource "tanzu-mission-control_repository_credential" "cluster_group_source_secret_ssh" {
  name = "tf-secret" # Required

  scope {
    cluster_group {
      name = "default" # Required
    }
  }

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    data {
      ssh_key {
        identity    = "testidentity"    # Required
        known_hosts = "testknown_hosts" # Required
      }
    }
  }
}
```

## Cluster scoped Repository Credential with SSH Key type credential

### Example Usage

```terraform
# Create Tanzu Mission Control source secret with attached set as default value.
resource "tanzu-mission-control_repository_credential" "cluster_source_secret_ssh" {
  name = "tf-secret" # Required

  scope {
    cluster {
      name                    = "testcluster" # Required
      provisioner_name        = "attached"    # Default: attached
      management_cluster_name = "attached"    # Default: attached
    }
  }

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    data {
      ssh_key {
        identity    = "testidentity"    # Required
        known_hosts = "testknown_hosts" # Required
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the source secret.
- `scope` (Block List, Min: 1, Max: 1) Scope for the source secret, having one of the valid scopes: cluster, cluster_group. (see [below for nested schema](#nestedblock--scope))
- `spec` (Block List, Min: 1, Max: 1) Spec for source secret. (see [below for nested schema](#nestedblock--spec))

### Optional

- `meta` (Block List, Max: 1) Metadata for the resource (see [below for nested schema](#nestedblock--meta))
- `org_id` (String) ID of Organization.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--scope"></a>
### Nested Schema for `scope`

Optional:

- `cluster` (Block List, Max: 1) The schema for cluster full name (see [below for nested schema](#nestedblock--scope--cluster))
- `cluster_group` (Block List, Max: 1) The schema for cluster group full name (see [below for nested schema](#nestedblock--scope--cluster_group))

<a id="nestedblock--scope--cluster"></a>
### Nested Schema for `scope.cluster`

Required:

- `name` (String) Name of this cluster

Optional:

- `management_cluster_name` (String) Name of the management cluster
- `provisioner_name` (String) Provisioner of the cluster


<a id="nestedblock--scope--cluster_group"></a>
### Nested Schema for `scope.cluster_group`

Required:

- `name` (String) Name of the cluster group



<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

Required:

- `data` (Block List, Min: 1, Max: 1) The schema for spec credential type. (see [below for nested schema](#nestedblock--spec--data))

<a id="nestedblock--spec--data"></a>
### Nested Schema for `spec.data`

Optional:

- `ssh_key` (Block List, Max: 1) The schema for SSH credential type spec. (see [below for nested schema](#nestedblock--spec--data--ssh_key))
- `username_password` (Block List, Max: 1) The schema for Username/Password credential type spec. (see [below for nested schema](#nestedblock--spec--data--username_password))

<a id="nestedblock--spec--data--ssh_key"></a>
### Nested Schema for `spec.data.ssh_key`

Required:

- `identity` (String, Sensitive) SSH Identity file.
- `known_hosts` (String) Known Hosts file path.


<a id="nestedblock--spec--data--username_password"></a>
### Nested Schema for `spec.data.username_password`

Required:

- `password` (String, Sensitive) Password for the basic authorization.
- `username` (String) Username for the basic authorization.




<a id="nestedblock--meta"></a>
### Nested Schema for `meta`

Optional:

- `annotations` (Map of String) Annotations for the resource
- `description` (String) Description of the resource
- `labels` (Map of String) Labels for the resource

Read-Only:

- `resource_version` (String) Resource version of the resource
- `uid` (String) UID of the resource