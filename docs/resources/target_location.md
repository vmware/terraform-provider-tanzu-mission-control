---
Title: "Target Location Resource"
Description: |-
   Creating a target location for data protection backups.
---

# Target Location (Backup Location) Resource

This resource enables users to create and configure target locations for data protection backups.
Once created, a target location can be used to store cluster backups.

**NOTE**: The type of a target location is inherited from the configured credentials type which can be either "TMC Managed" or "Self Managed".

For more information regarding target location, see [Target Location][target-location].

[target-location]: https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-using/GUID-867683CE-8AF0-4DC7-9121-81AD507EDB3B.html


# TMC Managed Target Location

## Example Usage

```terraform
resource "tanzu-mission-control_target_location" "demo_azure" {
  name          = "TARGET_LOCATION_NAME"

  spec {
    target_provider = "TARGET_PROVIDER_NAME"
    credential      = {
      name = "CREDENTIAL_NAME"
    }

    assigned_groups {
      cluster {
        management_cluster_name = "MGMT_CLS_NAME"
        provisioner_name        = "PROVISIONER_NAME"
        name                    = "CLS_NAME"
      }

      cluster {
        management_cluster_name = "MGMT_CLS_NAME"
        provisioner_name        = "PROVISIONER_NAME"
        name                    = "CLS_NAME"
      }

      cluster_groups = ["CLS_GROUP_NAME", "CLS_GROUP_NAME"]
    }
  }
}
```


# Self Managed Target Location

## AWS Target Location

### Example Usage

```terraform
resource "tanzu-mission-control_target_location" "demo_azure" {
  name          = "TARGET_LOCATION_NAME"

  spec {
    target_provider = "AWS"
    credential      = {
      name = "AWS_CREDENTIAL_NAME"
    }

    bucket = "BUCKET_NAME"
    region = "REGION"

    config {
      aws {
        s3_force_path_style = false
        s3_bucket_url       = "AWS_S3_BUCKET_URL"
        s3_public_url       = "AWS_S3_PUBLIC_URL"
      }
    }

    assigned_groups {
      cluster {
        management_cluster_name = "MGMT_CLS_NAME"
        provisioner_name        = "PROVISIONER_NAME"
        name                    = "CLS_NAME"
      }

      cluster {
        management_cluster_name = "MGMT_CLS_NAME"
        provisioner_name        = "PROVISIONER_NAME"
        name                    = "CLS_NAME"
      }

      cluster_groups = ["CLS_GROUP_NAME", "CLS_GROUP_NAME"]
    }
  }
}
```

## Azure Target Location

### Example Usage

```terraform
resource "tanzu-mission-control_target_location" "demo_azure" {
  name          = "TARGET_LOCATION_NAME"

  spec {
    target_provider = "AWS"
    credential      = {
      name = "AWS_CREDENTIAL_NAME"
    }

    bucket = "BUCKET_NAME"
    region = "REGION"

    config {
      aws {
        s3_force_path_style = false
        s3_bucket_url       = "AWS_S3_BUCKET_URL"
        s3_public_url       = "AWS_S3_PUBLIC_URL"
      }
    }

    assigned_groups {
      cluster {
        management_cluster_name = "MGMT_CLS_NAME"
        provisioner_name        = "PROVISIONER_NAME"
        name                    = "CLS_NAME"
      }

      cluster {
        management_cluster_name = "MGMT_CLS_NAME"
        provisioner_name        = "PROVISIONER_NAME"
        name                    = "CLS_NAME"
      }

      cluster_groups = ["CLS_GROUP_NAME", "CLS_GROUP_NAME"]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the target location
- `spec` (Block List, Min: 1, Max: 1) Spec block of backup target location (see [below for nested schema](#nestedblock--spec))

### Optional

- `meta` (Block List, Max: 1) Metadata for the resource (see [below for nested schema](#nestedblock--meta))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

Required:

- `credential` (Map of String) Credentials block
- `target_provider` (String) The target provider of the backup storage.
Valid values are (AWS, AZURE)

Optional:

- `assigned_groups` (Block List, Max: 1) Assigned groups block for the target location. (see [below for nested schema](#nestedblock--spec--assigned_groups))
- `bucket` (String) The bucket to use for object storage.
- `ca_cert` (String) A PEM-encoded certificate bundle to trust while connecting to the storage backend.
- `config` (Block List, Max: 1) Target location config block.
Required only when target location is Self Managed and should contain either AWS or Azure blocks but not both. (see [below for nested schema](#nestedblock--spec--config))
- `region` (String) The region of the bucket origin.
Required only when target location is AWS Self Managed.

Read-Only:

- `sys_bucket_key` (String) System bucket to use for object storage.
(Only used for Managed TMC)
- `sys_region_key` (String) System bucket region (Only used for Managed TMC)

<a id="nestedblock--spec--assigned_groups"></a>
### Nested Schema for `spec.assigned_groups`

Optional:

- `cluster` (Block List) (Repeatable Block) Cluster block. (see [below for nested schema](#nestedblock--spec--assigned_groups--cluster))
- `cluster_groups` (List of String) Cluster group names

<a id="nestedblock--spec--assigned_groups--cluster"></a>
### Nested Schema for `spec.assigned_groups.cluster`

Required:

- `management_cluster_name` (String) Management cluster name
- `name` (String) Cluster name
- `provisioner_name` (String) Cluster provisioner name



<a id="nestedblock--spec--config"></a>
### Nested Schema for `spec.config`

Optional:

- `aws` (Block List, Max: 1) AWS S3 and S3-compatible target location config block. (see [below for nested schema](#nestedblock--spec--config--aws))
- `azure` (Block List, Max: 1) Azure target location config block. (see [below for nested schema](#nestedblock--spec--config--azure))

<a id="nestedblock--spec--config--aws"></a>
### Nested Schema for `spec.config.aws`

Optional:

- `s3_bucket_url` (String) The service endpoint for non-AWS S3 storage solution.
- `s3_force_path_style` (Boolean) A flag for whether to force path style URLs for S3 objects.
It is default to false and set it to true when using local storage service like Minio.
- `s3_public_url` (String) The service endpoint used for generating download URLs. This field is primarily for local storage services like Minio.


<a id="nestedblock--spec--config--azure"></a>
### Nested Schema for `spec.config.azure`

Optional:

- `resource_group` (String) Name of the resource group containing the storage account for this backup storage location.
- `storage_account` (String) Subscription ID under which all the resources are being managed in azure.
- `subscription_id` (String) Name of the storage account for this backup storage location.




<a id="nestedblock--meta"></a>
### Nested Schema for `meta`

Optional:

- `annotations` (Map of String) Annotations for the resource
- `description` (String) Description of the resource
- `labels` (Map of String) Labels for the resource

Read-Only:

- `resource_version` (String) Resource version of the resource
- `uid` (String) UID of the resource
