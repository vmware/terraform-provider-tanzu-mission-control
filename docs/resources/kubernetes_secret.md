---
Title: "Kubernetes Secret Resource"
Description: |-
    Creating the Kubernetes Secret resource.
---

# Kubernetes Secret

Manage a Kubernetes Secret using this Terraform module.

In managed clusters, both attached and provisioned, you can create Kubernetes Secret that you can manage through Tanzu Mission Control.

To create a kubernetes secret, you must be associated with the cluster.admin or clustergroup.admin role.

The `tanzu-mission-control_kubernetes_secret` resource enables you to create kubernetes secret to a particular scope for management through Tanzu Mission Control.

You can optionally make export to true to make the secret available to all namespaces.

[kubernetes Secret]: https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-using/GUID-BBE2404D-C2EE-41C7-B639-C0322783A74D.html

[export secret to all namespaces]: https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/tanzumc-using/GUID-B0A72F72-4216-4869-B293-6802368B11D2.html

## Kubernetes Secret Scope and Inheritance

In the Tanzu Mission Control resource hierarchy, there are two levels at which you can specify kubernetes secret resources:
- **object groups** - `cluster_group` block under `scope` sub-resource
- **Kubernetes objects** - `cluster` block under `scope` sub-resource  

**Note:**
The scope parameter is mandatory in the schema and the user needs to add one of the defined scopes to the script for the provider to function.
Only one scope per resource is allowed.

## Cluster scoped kubernetes secret

## Example Usage

```terraform
# Create Tanzu Mission Control kubernetes secret with attached set as default value.
# Example for creating the dockerconfigjson secret
resource "tanzu-mission-control_kubernetes_secret" "dockerconfigjson_secret" {
  name           = "tf-secret"                # Required
  namespace_name = "tf-secret-namespace-name" # Required 

  scope {
    cluster {
      name                    = "testcluster" # Required
      provisioner_name        = "attached"    # Default: attached
      management_cluster_name = "attached"    # Default: attached
    }
  }

  export = false # Default: false

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    docker_config_json {
      username           = "testusername"         # Required
      password           = "testpassword"         # Required
      image_registry_url = "testimageregistryurl" # Required
    }
  }
}

# Example for creating the opaque secret
resource "tanzu-mission-control_kubernetes_secret" "opaque_secret" {
  name           = "tf-secret"                # Required
  namespace_name = "tf-secret-namespace-name" # Required 

  scope {
    cluster {
      name                    = "testcluster" # Required
      provisioner_name        = "attached"    # Default: attached
      management_cluster_name = "attached"    # Default: attached
    }
  }

  export = false # Default: false

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    opaque = {
      "key1" : "value1"
      "key2" : "value2"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the secret resource.
- `namespace_name` (String) Name of Namespace where secret will be created.
- `scope` (Block List, Min: 1, Max: 1) Scope for the kubernetes secret, having one of the valid scopes: cluster, cluster_group. (see [below for nested schema](#nestedblock--scope))
- `spec` (Block List, Min: 1, Max: 1) Spec for the kubernetes secret (see [below for nested schema](#nestedblock--spec))

### Optional

- `export` (Boolean) Export the secret to all namespaces.
- `meta` (Block List, Max: 1) Metadata for the resource (see [below for nested schema](#nestedblock--meta))
- `org_id` (String) ID of Organization.

### Read-Only

- `id` (String) The ID of this resource.
- `status` (Map of String) Status for the kubernetes Secret.

<a id="nestedblock--scope"></a>
### Nested Schema for `scope`

Optional:

- `cluster` (Block List, Max: 1) The schema for cluster full name (see [below for nested schema](#nestedblock--scope--cluster))
- `cluster_group` (Block List, Max: 1) The schema for cluster group full name (see [below for nested schema](#nestedblock--scope--cluster_group))

<a id="nestedblock--scope--cluster"></a>
### Nested Schema for `scope.cluster`

Required:

- `name` (String) Name of this cluster

Optional:

- `management_cluster_name` (String) Name of the management cluster
- `provisioner_name` (String) Provisioner of the cluster


<a id="nestedblock--scope--cluster_group"></a>
### Nested Schema for `scope.cluster_group`

Required:

- `name` (String) Name of the cluster group



<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

Optional:

- `docker_config_json` (Block List) SecretType definition - SECRET_TYPE_DOCKERCONFIGJSON, Kubernetes secrets type. (see [below for nested schema](#nestedblock--spec--docker_config_json))
- `opaque` (Map of String, Sensitive) SecretType definition - SECRET_TYPE_OPAQUE, Kubernetes secrets type.

<a id="nestedblock--spec--docker_config_json"></a>
### Nested Schema for `spec.docker_config_json`

Required:

- `image_registry_url` (String) SecretType definition - Server URL of the registry.
- `password` (String, Sensitive) SecretType definition - Password of the registry.
- `username` (String) SecretType definition - Username of the registry.



<a id="nestedblock--meta"></a>
### Nested Schema for `meta`

Optional:

- `annotations` (Map of String) Annotations for the resource
- `description` (String) Description of the resource
- `labels` (Map of String) Labels for the resource

Read-Only:

- `resource_version` (String) Resource version of the resource
- `uid` (String) UID of the resource


## Cluster Group scoped kubernetes secret

## Example Usage

```terraform
# Create Tanzu Mission Control kubernetes secret with attached set as default value.
# Example for creating the dockerconfigjson secret
resource "tanzu-mission-control_kubernetes_secret" "dockerconfigjson_secret" {
  name           = "tf-secret"                # Required
  namespace_name = "tf-secret-namespace-name" # Required 

  scope {
    cluster_group {
      name = "default" # Required
    }
  }

  export = false # Default: false

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    docker_config_json {
      username           = "testusername"         # Required
      password           = "testpassword"         # Required
      image_registry_url = "testimageregistryurl" # Required
    }
  }
}

# Example for creating the opaque secret
resource "tanzu-mission-control_kubernetes_secret" "opaque_secret" {
  name           = "tf-secret"                # Required
  namespace_name = "tf-secret-namespace-name" # Required 

  scope {
    cluster_group {
      name = "default" # Required
    }
  }

  export = false # Default: false

  meta {
    description = "Create namespace through terraform"
    labels      = { "key" : "value" }
  }

  spec {
    opaque = {
      "key1" : "value1"
      "key2" : "value2"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the secret resource.
- `namespace_name` (String) Name of Namespace where secret will be created.
- `scope` (Block List, Min: 1, Max: 1) Scope for the kubernetes secret, having one of the valid scopes: cluster, cluster_group. (see [below for nested schema](#nestedblock--scope))
- `spec` (Block List, Min: 1, Max: 1) Spec for the kubernetes secret (see [below for nested schema](#nestedblock--spec))

### Optional

- `export` (Boolean) Export the secret to all namespaces.
- `meta` (Block List, Max: 1) Metadata for the resource (see [below for nested schema](#nestedblock--meta))
- `org_id` (String) ID of Organization.

### Read-Only

- `id` (String) The ID of this resource.
- `status` (Map of String) Status for the kubernetes Secret.

<a id="nestedblock--scope"></a>
### Nested Schema for `scope`

Optional:

- `cluster` (Block List, Max: 1) The schema for cluster full name (see [below for nested schema](#nestedblock--scope--cluster))
- `cluster_group` (Block List, Max: 1) The schema for cluster group full name (see [below for nested schema](#nestedblock--scope--cluster_group))

<a id="nestedblock--scope--cluster"></a>
### Nested Schema for `scope.cluster`

Required:

- `name` (String) Name of this cluster

Optional:

- `management_cluster_name` (String) Name of the management cluster
- `provisioner_name` (String) Provisioner of the cluster


<a id="nestedblock--scope--cluster_group"></a>
### Nested Schema for `scope.cluster_group`

Required:

- `name` (String) Name of the cluster group



<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

Optional:

- `docker_config_json` (Block List) SecretType definition - SECRET_TYPE_DOCKERCONFIGJSON, Kubernetes secrets type. (see [below for nested schema](#nestedblock--spec--docker_config_json))
- `opaque` (Map of String, Sensitive) SecretType definition - SECRET_TYPE_OPAQUE, Kubernetes secrets type.

<a id="nestedblock--spec--docker_config_json"></a>
### Nested Schema for `spec.docker_config_json`

Required:

- `image_registry_url` (String) SecretType definition - Server URL of the registry.
- `password` (String, Sensitive) SecretType definition - Password of the registry.
- `username` (String) SecretType definition - Username of the registry.



<a id="nestedblock--meta"></a>
### Nested Schema for `meta`

Optional:

- `annotations` (Map of String) Annotations for the resource
- `description` (String) Description of the resource
- `labels` (Map of String) Labels for the resource

Read-Only:

- `resource_version` (String) Resource version of the resource
- `uid` (String) UID of the resource